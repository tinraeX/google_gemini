# tinraeX PRO — Автономный ИИ-агент для пентестинга

**Автономный агент для тестирования на проникновение, использующий Google Gemini Pro. Оптимизирован для длительных сессий в бесплатной среде Google Cloud Shell.**

**tinraeX PRO** — это автономный агент для проведения тестирования на проникновение, который использует мощь больших языковых моделей Google (Gemini) для принятия решений. Он построен на архитектуре «Командир-Исполнитель», что позволяет ему итеративно исследовать цель, адаптироваться к ситуации и самостоятельно принимать решения о следующих шагах.

**⚠️ ПРЕДУПРЕЖДЕНИЕ: Этот инструмент предназначен исключительно для образовательных целей и для использования на системах, на тестирование которых у вас есть явное разрешение. Несанкционированное использование этого инструмента является незаконным. Разработчик не несет ответственности за любой ущерб или неправомерные действия.**

![tinraeX PRO](sc.png)

---

### Ключевые возможности

*   **Автономная работа:** Агент способен самостоятельно анализировать цель, планировать и выполнять атаки без вмешательства человека.
*   **Архитектура «Командир-Исполнитель»:**
    *   **Commander (Gemini 2.5 Pro):** Стратегический мозг, который анализирует собранные данные, строит гипотезы и разрабатывает многошаговые планы атак.
    *   **Worker (Gemini 2.5 Flash):** Тактический исполнитель, который выполняет команды, анализирует их вывод и сообщает о результатах Командиру.
*   **Адаптивные фазы атаки:** Агент эскалирует свою агрессивность, проходя через фазы от пассивной разведки (Phase A) до креативной эксплуатации и поиска 0-day (Phase D).
*   **Самообучение и самоисправление:** Агент умеет исправлять неработающие команды, искать способы установки недостающих инструментов и кэшировать успешные решения.
*   **Персистентное состояние:** Вся информация о миссии, выполненные команды и их результаты сохраняются в базе данных SQLite, что позволяет возобновлять работу и вести долгосрочные кампании.
*   **Динамическая установка инструментов:** Если для выполнения задачи требуется инструмент, которого нет в системе, агент попытается найти способ его установить.

### Архитектура

Система работает в асинхронном цикле, имитируя работу исследователя безопасности:

```
+-------------------+      +---------------------+      +---------------------+
|     Commander     |----->|     Task Queue      |----->|       Worker        |
| (Стратегический   |      | (Очередь задач)     |      | (Тактический        |
|      план)        |      +---------------------+      |    исполнитель)     |
+--------^----------+               |               +----------v----------+
         |                       (пусто)                        |
         |                         |                            |
+--------+----------+      +---------------------+      +---------------------+
| Knowledge Base    |<-----|   Analyze Output    |<-----|  Execute Command    |
| (База знаний, DB) |      | (Анализ результата) |      | (Выполнение команды)|
+-------------------+      +---------------------+      +---------------------+
```

1.  **Commander** анализирует текущую информацию и создает план (список задач).
2.  Задачи помещаются в **очередь**.
3.  **Worker** берет задачу из очереди.
4.  Если для задачи нужен инструмент, **Worker** проверяет его наличие и при необходимости устанавливает.
5.  **Worker** выполняет команду и анализирует результат с помощью модели Gemini.
6.  Результат (краткая сводка и структурированные данные) сохраняется в **базу знаний**.
7.  Когда очередь задач пуста, **Commander** снова анализирует всю накопленную информацию и создает новый план, замыкая цикл.

---

### Установка и запуск в Google Cloud Shell

#### Шаг 1. Подготовка среды

1.  **Перейдите в Google Cloud Shell.**
    *   Откройте [shell.cloud.google.com](https://shell.cloud.google.com/) и войдите в свой аккаунт Google.

2.  **Получите постоянные права `root`.**
    *   **Зачем это нужно?** Бесплатный Google Cloud Shell имеет ограничение на размер домашней директории (~5 ГБ). Чтобы обойти это, мы будем работать из корневой директории `/`, где этих ограничений нет. Для этого нужны права суперпользователя.
    *   Откройте файл `.bashrc` для редактирования:
        ```bash
        nano ~/.bashrc
        ```
    *   Добавьте в самый конец файла следующий код:
        ```bash
        # Automatically switch to root user on shell start
        if [ "$(id -u)" -ne 0 ] && [ -z "$__GEMINI_ALREADY_ROOT__" ]; then
          export __GEMINI_ALREADY_ROOT__="true"
          exec sudo -i
        fi
        ```
    *   Сохраните файл (`Ctrl+O`, `Enter`) и закройте редактор (`Ctrl+X`).
    *   **Закройте и снова откройте вкладку Cloud Shell.** Теперь ваш терминал должен запускаться от имени `root@...`.

3.  **Получите и настройте API-ключ Gemini.**
    *   Перейдите в [Google AI Studio](https://aistudio.google.com/app/apikey) и создайте API-ключ.
    *   *Для пользователей из РФ может потребоваться VPN. Простое браузерное расширение (например, Browsec) отлично справляется.*
    *   Экспортируйте ключ как переменную окружения в терминале Cloud Shell. **Это нужно делать в каждой новой сессии.**
        ```bash
        export GEMINI_API_KEY="ВАШ_API_КЛЮЧ_ВСТАВИТЬ_СЮДА"
        ```

#### Шаг 2. Установка агента

1.  **Клонируйте репозиторий.**
    ```bash
    git clone https://github.com/tinraeX/tinraex.git
    cd tinraex
    ```
2.  **Запустите установщик.**
    Скрипт автоматически обнаружит ваш `GEMINI_API_KEY`, установит все зависимости и подготовит агента к работе.
    ```bash
    chmod +x tinraex.sh
    ./tinraex.sh
    ```

#### Шаг 3. Запуск и использование
![tinraeX PRO](sc2.png)

После завершения установки агент запустится **автоматически**.

При первом запуске вам будет предложено:
1.  **Ввести цели:** Укажите один или несколько доменов через запятую (например, `example.com,test.net`).
2.  **Ввести начальный вектор:** Вы можете дать агенту первую команду (например, `найти субдомены для TARGET`) или просто нажать `Enter`, чтобы он начал работу в полностью автоматическом режиме.

Для ручного запуска агента в будущем:
```bash
# Убедитесь, что вы снова экспортировали API-ключ (Шаг 1.3)
export GEMINI_API_KEY="ВАШ_API_КЛЮЧ"

# Перейдите в директорию агента и запустите его
cd /opt/tinraeX
venv/bin/python3 -m src
```

Для остановки агента в любой момент нажмите `Ctrl+C`.
